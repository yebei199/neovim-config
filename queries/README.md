# queries — 自定义 TreeSitter 查询

本目录存放 `.scm` 格式的 TreeSitter 查询文件，用于扩展或覆盖 Neovim 内置 TreeSitter 解析器的语法高亮、代码折叠等规则。Neovim 会自动扫描配置目录下的 `queries/{language}/` 子目录，将其中的查询文件与内置规则合并（`extends` 指令）或完全替换（无 extends 时覆盖）。

与直接修改 TreeSitter 解析器的 grammar 不同，查询文件只描述"如何把语法节点映射到高亮分组"，无需重新编译解析器，改动即时生效。这是在不 fork 上游 parser 的前提下精细调整特定语法高亮行为的标准方式。

## 目录结构

**`lua/`** — 针对 Lua 语言的自定义高亮查询，当前包含 `highlights.scm`。该文件以 `;;extends` 开头，表示在内置 Lua 高亮规则基础上追加自定义规则，而非完全替换，保证内置高亮规则仍然生效。

## 设计意图

本目录的查询文件专门针对 Neovim 配置代码（Lua）的高亮场景进行优化。标准 Lua 解析器并不了解 `vim` 全局对象的特殊含义，通过自定义查询可以将其标记为内置命名空间，从而在配置编写过程中获得更准确的视觉反馈。后续若需为其他语言添加高亮微调，只需在对应语言子目录下创建 `.scm` 文件即可，无需修改任何 Lua 配置代码。
